(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{347:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"pcsmt-2-项目功能实现文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pcsmt-2-项目功能实现文档"}},[t._v("#")]),t._v(" PCSMT-2 项目功能实现文档")]),t._v(" "),s("p",[t._v("PCSMT-2 已经停止更新, 后续版本将不再维护.")]),t._v(" "),s("h2",{attrs:{id:"_1-项目概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-项目概述"}},[t._v("#")]),t._v(" 1. 项目概述")]),t._v(" "),s("p",[t._v("PCSMT-2（Python Minecraft Server Manager Tool 2）是一个功能全面的Minecraft服务器管理工具，支持GUI界面、命令行操作和Web管理界面，提供从服务器创建、配置、启动到监控的全生命周期管理。")]),t._v(" "),s("h3",{attrs:{id:"_1-1-主要特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-主要特性"}},[t._v("#")]),t._v(" 1.1 主要特性")]),t._v(" "),s("ul",[s("li",[t._v("多版本Java自动管理与安装")]),t._v(" "),s("li",[t._v("服务器添加、配置、启动、停止、删除等核心功能")]),t._v(" "),s("li",[t._v("定时任务与服务器监控")]),t._v(" "),s("li",[t._v("RCON协议支持实现远程控制")]),t._v(" "),s("li",[t._v("备份与回档功能")]),t._v(" "),s("li",[t._v("Web API接口")]),t._v(" "),s("li",[t._v("Tkinter GUI界面")]),t._v(" "),s("li",[t._v("命令历史记录和自动补全")])]),t._v(" "),s("h2",{attrs:{id:"_2-系统架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-系统架构"}},[t._v("#")]),t._v(" 2. 系统架构")]),t._v(" "),s("h3",{attrs:{id:"_2-1-核心模块结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-核心模块结构"}},[t._v("#")]),t._v(" 2.1 核心模块结构")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("主程序模块")]),t._v("：PCSMT2.py，程序入口点，负责初始化GUI、命令行界面和启动相关服务")]),t._v(" "),s("li",[s("strong",[t._v("服务器管理模块")]),t._v("：Server.py，实现服务器的添加、启动、停止、删除等核心功能")]),t._v(" "),s("li",[s("strong",[t._v("Java管理模块")]),t._v("：Java.py，负责Java版本的检测、安装和配置")]),t._v(" "),s("li",[s("strong",[t._v("定时任务模块")]),t._v("：timer.py，实现服务器状态监控和存储大小更新等定时任务")]),t._v(" "),s("li",[s("strong",[t._v("Web API模块")]),t._v("：api目录下的相关文件，提供HTTP接口供Web界面调用")]),t._v(" "),s("li",[s("strong",[t._v("配置管理")]),t._v("：通过config.json和java_versions.json管理程序配置")])]),t._v(" "),s("h2",{attrs:{id:"_3-核心功能实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-核心功能实现"}},[t._v("#")]),t._v(" 3. 核心功能实现")]),t._v(" "),s("h3",{attrs:{id:"_3-1-程序初始化流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-程序初始化流程"}},[t._v("#")]),t._v(" 3.1 程序初始化流程")]),t._v(" "),s("p",[t._v("程序启动时执行以下初始化流程：")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("进程检查")]),t._v("：确保只运行一个程序实例，防止冲突")]),t._v(" "),s("li",[s("strong",[t._v("Java环境检测")]),t._v("：检查并自动安装所需的Java版本（1.8、16、17、21）")]),t._v(" "),s("li",[s("strong",[t._v("配置加载")]),t._v("：读取config.json配置文件")]),t._v(" "),s("li",[s("strong",[t._v("定时任务初始化")]),t._v("：启动存储大小更新定时器和心跳检测")]),t._v(" "),s("li",[s("strong",[t._v("GUI初始化")]),t._v("：创建Tkinter主窗口和界面组件")]),t._v(" "),s("li",[s("strong",[t._v("Web服务器启动")]),t._v("：启动Flask Web API服务")])]),t._v(" "),s("p",[t._v("核心初始化代码如下：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进程检查与窗口置顶")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetWindowTop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ProgramName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实现进程检查和窗口置顶逻辑")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Java环境检测与安装")]),t._v("\nversions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" version "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" versions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    results "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Examine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Exist"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" results"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 尝试自动安装Java")]),t._v("\n        result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Windows"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定时任务启动")]),t._v("\ntimer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TimerStorageSizeUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Web服务器启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# GUI初始化")]),t._v("\napp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TkinterApp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MainLoop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-java版本管理功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-java版本管理功能"}},[t._v("#")]),t._v(" 3.2 Java版本管理功能")]),t._v(" "),s("p",[t._v("Java版本管理模块负责检测、安装和配置不同版本的Java环境，支持自动下载和安装Amazon Corretto JDK。")]),t._v(" "),s("p",[s("strong",[t._v("核心功能")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("自动检测系统已安装的Java版本")]),t._v(" "),s("li",[t._v("支持自动下载并安装指定版本的Java（1.8、16、17、21）")]),t._v(" "),s("li",[t._v("为不同版本的Minecraft服务器选择合适的Java版本")]),t._v(" "),s("li",[t._v("环境变量配置")])]),t._v(" "),s("p",[s("strong",[t._v("版本匹配逻辑")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据Minecraft版本选择合适的Java版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JavaVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    java_args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n    v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 按照版本使用不同版本的Java JDK")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./java_versions.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        java_versions_address "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.17.0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            java_args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" java_versions_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.17.0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.18.2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            java_args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" java_versions_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'16'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.18.2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.20.4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            java_args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" java_versions_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'17'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.20.5'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.21.8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            java_args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" java_versions_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'21'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" java_args\n")])])]),s("h3",{attrs:{id:"_3-3-服务器管理功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-服务器管理功能"}},[t._v("#")]),t._v(" 3.3 服务器管理功能")]),t._v(" "),s("p",[t._v("服务器管理是本程序的核心功能，提供了Minecraft服务器的全生命周期管理。")]),t._v(" "),s("h4",{attrs:{id:"_3-3-1-服务器添加功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-服务器添加功能"}},[t._v("#")]),t._v(" 3.3.1 服务器添加功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：将已有的Minecraft服务器目录添加到程序管理中，创建必要的配置文件和启动脚本。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("扫描指定目录下的服务器核心文件（.jar文件）")]),t._v(" "),s("li",[t._v("过滤排除不必要的jar文件")]),t._v(" "),s("li",[t._v("创建服务器启动批处理文件")]),t._v(" "),s("li",[t._v("生成服务器信息JSON文件，包含名称、路径、核心、大小等信息")]),t._v(" "),s("li",[t._v("创建EULA协议文件")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加服务器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查路径是否存在")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找服务器核心文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 过滤排除关键字文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建启动批处理文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建服务器信息JSON文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建EULA协议文件")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-2-服务器启动功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-服务器启动功能"}},[t._v("#")]),t._v(" 3.3.2 服务器启动功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：启动指定的Minecraft服务器，支持nogui模式和内存配置。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("读取服务器信息文件")]),t._v(" "),s("li",[t._v("检查EULA协议是否同意")]),t._v(" "),s("li",[t._v("获取或设置服务器端口")]),t._v(" "),s("li",[t._v("设置RCON端口（如果启用）")]),t._v(" "),s("li",[t._v("根据服务器版本选择合适的Java版本")]),t._v(" "),s("li",[t._v("创建并执行启动进程")]),t._v(" "),s("li",[t._v("记录服务器启动信息到latest.json和latest.txt")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动服务器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取服务器信息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查EULA协议")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取服务器端口")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置RCON端口")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择Java版本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建并执行启动进程")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 记录启动信息")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-3-服务器停止功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-服务器停止功能"}},[t._v("#")]),t._v(" 3.3.3 服务器停止功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：停止指定的Minecraft服务器，支持RCON方式优雅停止和强制停止。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("尝试通过RCON协议发送/stop命令优雅停止服务器")]),t._v(" "),s("li",[t._v("如果RCON方式失败，尝试通过任务管理器结束进程")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止服务器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 尝试RCON方式停止")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果失败，尝试强制停止")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-4-服务器删除功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-4-服务器删除功能"}},[t._v("#")]),t._v(" 3.3.4 服务器删除功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：从程序中删除指定的服务器，支持保留或删除实际服务器文件。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("查找服务器信息文件")]),t._v(" "),s("li",[t._v("显示服务器信息并请求确认")]),t._v(" "),s("li",[t._v("删除服务器信息文件")]),t._v(" "),s("li",[t._v("可选删除服务器实际文件")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除服务器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找服务器信息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求确认")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除服务器信息文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选删除服务器文件")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-5-服务器回档功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-5-服务器回档功能"}},[t._v("#")]),t._v(" 3.3.5 服务器回档功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：将服务器回档到之前的备份状态，支持mod和plugin类型的备份。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("查找备份文件（支持FTB Backups 2模组和eBackup插件）")]),t._v(" "),s("li",[t._v("解压备份文件")]),t._v(" "),s("li",[t._v("替换现有服务器文件")]),t._v(" "),s("li",[t._v("处理权限问题")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器回档")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Retracement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找备份文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压备份")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 替换服务器文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 处理权限")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-6-服务器属性修改功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-6-服务器属性修改功能"}},[t._v("#")]),t._v(" 3.3.6 服务器属性修改功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：修改服务器的配置属性，如服务器端口、游戏模式、难度等。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("读取服务器server.properties文件")]),t._v(" "),s("li",[t._v("查找指定关键字")]),t._v(" "),s("li",[t._v("修改对应的值")]),t._v(" "),s("li",[t._v("保存文件")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改服务器属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Change")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取服务器信息")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找并修改关键字参数")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-3-7-服务器运行内存修改功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-7-服务器运行内存修改功能"}},[t._v("#")]),t._v(" 3.3.7 服务器运行内存修改功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：修改服务器启动时的内存配置（最小内存和最大内存）。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("读取服务器启动批处理文件")]),t._v(" "),s("li",[t._v("修改-Xms和-Xmx参数")]),t._v(" "),s("li",[t._v("保存文件")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改服务器运行内存")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Change")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RunningMemories")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" memory_min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" memory_max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取服务器信息")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改启动批处理文件中的内存参数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存文件")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-4-定时任务与监控功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-定时任务与监控功能"}},[t._v("#")]),t._v(" 3.4 定时任务与监控功能")]),t._v(" "),s("p",[t._v("定时任务模块负责定期更新服务器存储大小和监控服务器在线状态。")]),t._v(" "),s("h4",{attrs:{id:"_3-4-1-存储大小更新功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-存储大小更新功能"}},[t._v("#")]),t._v(" 3.4.1 存储大小更新功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：定期更新并记录服务器存储大小，支持配置更新频率。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("为每个服务器创建单独的定时任务线程")]),t._v(" "),s("li",[t._v("定期检查服务器存储大小")]),t._v(" "),s("li",[t._v("如果大小有变化，记录到存储大小文件")]),t._v(" "),s("li",[t._v("更新服务器信息文件中的大小字段")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存储大小更新定时器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimerStorageSizeUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为每个服务器创建定时任务线程")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动线程")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" server_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定时检查存储大小")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新存储大小记录")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-4-2-服务器心跳检测功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-服务器心跳检测功能"}},[t._v("#")]),t._v(" 3.4.2 服务器心跳检测功能")]),t._v(" "),s("p",[s("strong",[t._v("功能说明")]),t._v("：定期检测服务器在线状态，更新服务器状态信息。")]),t._v(" "),s("p",[s("strong",[t._v("实现流程")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("创建心跳检测线程")]),t._v(" "),s("li",[t._v("定期检查所有服务器的在线状态")]),t._v(" "),s("li",[t._v("维护服务器状态列表")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器心跳检测")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Heartbeat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建并启动心跳检测线程")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定期检测服务器状态")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取并更新服务器状态信息")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-5-rcon协议功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-rcon协议功能"}},[t._v("#")]),t._v(" 3.5 RCON协议功能")]),t._v(" "),s("p",[t._v("RCON协议功能允许程序与Minecraft服务器进行远程通信，执行命令和获取信息。")]),t._v(" "),s("p",[s("strong",[t._v("核心功能")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("建立RCON连接")]),t._v(" "),s("li",[t._v("发送命令（如ban、op、stop等）")]),t._v(" "),s("li",[t._v("接收命令执行结果")]),t._v(" "),s("li",[t._v("服务器在线状态检测")])]),t._v(" "),s("p",[s("strong",[t._v("应用场景")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("封禁/解封玩家（do_banned/do_unban命令）")]),t._v(" "),s("li",[t._v("添加/删除OP玩家（do_op/do_deop命令）")]),t._v(" "),s("li",[t._v("优雅停止服务器（do_stop_server命令）")]),t._v(" "),s("li",[t._v("获取服务器状态信息")])]),t._v(" "),s("h3",{attrs:{id:"_3-6-gui界面实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-gui界面实现"}},[t._v("#")]),t._v(" 3.6 GUI界面实现")]),t._v(" "),s("p",[t._v("程序使用Tkinter库实现图形用户界面，提供直观的操作体验。")]),t._v(" "),s("p",[s("strong",[t._v("核心组件")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("主窗口：支持自定义大小和位置")]),t._v(" "),s("li",[t._v("顶部按钮区域：包含帮助、调试模式等功能按钮")]),t._v(" "),s("li",[t._v("日志输出区域：使用ScrolledText组件显示程序日志")]),t._v(" "),s("li",[t._v("命令输入区域：支持命令输入和自动补全")]),t._v(" "),s("li",[t._v("状态栏：显示程序版本信息")])]),t._v(" "),s("p",[s("strong",[t._v("交互功能")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("命令历史记录：支持上下键导航历史命令")]),t._v(" "),s("li",[t._v("命令自动补全：支持Tab键命令和参数补全")]),t._v(" "),s("li",[t._v("日志重定向：将控制台输出重定向到日志区域")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# GUI主类")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TkinterApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化主窗口")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建界面组件")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 绑定事件")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateWidgets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建按钮区域")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建日志输出区域")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建命令输入区域")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CompleteCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实现命令自动补全功能")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RunCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行输入的命令")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-7-命令行功能实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-命令行功能实现"}},[t._v("#")]),t._v(" 3.7 命令行功能实现")]),t._v(" "),s("p",[t._v("程序基于cmd2库实现命令行功能，提供丰富的命令集。")]),t._v(" "),s("p",[s("strong",[t._v("核心命令")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("version")]),t._v("：查看程序版本信息")]),t._v(" "),s("li",[s("strong",[t._v("about")]),t._v("：查看程序关于信息")]),t._v(" "),s("li",[s("strong",[t._v("sta")]),t._v("：显示服务器状态")]),t._v(" "),s("li",[s("strong",[t._v("add_server")]),t._v("：添加服务器")]),t._v(" "),s("li",[s("strong",[t._v("start_server")]),t._v("：启动服务器")]),t._v(" "),s("li",[s("strong",[t._v("server_list")]),t._v("：列出所有服务器")]),t._v(" "),s("li",[s("strong",[t._v("change_server_properties")]),t._v("：修改服务器属性")]),t._v(" "),s("li",[s("strong",[t._v("change_server_run_memories_config")]),t._v("：修改服务器运行内存")]),t._v(" "),s("li",[s("strong",[t._v("delete_server")]),t._v("：删除服务器")]),t._v(" "),s("li",[s("strong",[t._v("search_server")]),t._v("：搜索服务器")]),t._v(" "),s("li",[s("strong",[t._v("banned/unban")]),t._v("：封禁/解封玩家")]),t._v(" "),s("li",[s("strong",[t._v("op/deop")]),t._v("：添加/删除OP玩家")]),t._v(" "),s("li",[s("strong",[t._v("stop_server")]),t._v("：停止服务器")])]),t._v(" "),s("p",[s("strong",[t._v("命令自动补全")]),t._v("：\n为主要命令实现了参数自动补全功能，提高用户体验。")]),t._v(" "),s("p",[s("strong",[t._v("代码实现")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 命令行类")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PCSMT2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("do_version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示程序版本信息")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("do_add_server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加服务器命令实现")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("complete_add_server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" begidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" endidx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 命令补全实现")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-8-web-api与管理界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-web-api与管理界面"}},[t._v("#")]),t._v(" 3.8 Web API与管理界面")]),t._v(" "),s("p",[t._v("程序内置Flask Web服务器，提供HTTP API接口，并支持Web管理界面。")]),t._v(" "),s("p",[s("strong",[t._v("核心API接口")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("/api/program/version")]),t._v("：获取程序版本信息")]),t._v(" "),s("li",[s("code",[t._v("/api/server/list")]),t._v("：获取服务器列表")]),t._v(" "),s("li",[t._v("其他服务器管理相关接口")])]),t._v(" "),s("p",[s("strong",[t._v("Web管理界面功能")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("服务器列表显示")]),t._v(" "),s("li",[t._v("服务器状态监控")]),t._v(" "),s("li",[t._v("CPU、内存、磁盘使用率监控")]),t._v(" "),s("li",[t._v("服务器操作（启动、停止等）")]),t._v(" "),s("li",[t._v("终端日志查看")])]),t._v(" "),s("p",[s("strong",[t._v("定时刷新功能")]),t._v("：\nWeb界面使用JavaScript定时器定期刷新服务器状态和监控数据。")]),t._v(" "),s("h2",{attrs:{id:"_4-配置系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置系统"}},[t._v("#")]),t._v(" 4. 配置系统")]),t._v(" "),s("p",[t._v("程序通过配置文件管理各种设置，主要包括：")]),t._v(" "),s("h3",{attrs:{id:"_4-1-config-json配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-config-json配置文件"}},[t._v("#")]),t._v(" 4.1 config.json配置文件")]),t._v(" "),s("p",[s("strong",[t._v("主要配置项")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("PCSMT2_Version")]),t._v("：程序版本号")]),t._v(" "),s("li",[s("code",[t._v("ReleaseVersion")]),t._v("：发布版本类型")]),t._v(" "),s("li",[s("code",[t._v("RunningMemories_Min")]),t._v("：最小运行内存（MB）")]),t._v(" "),s("li",[s("code",[t._v("RunningMemories_Max")]),t._v("：最大运行内存（MB）")]),t._v(" "),s("li",[s("code",[t._v("Nogui")]),t._v("：是否使用nogui模式启动服务器")]),t._v(" "),s("li",[s("code",[t._v("EULAGenerateWaitTime")]),t._v("：EULA生成等待时间")]),t._v(" "),s("li",[s("code",[t._v("AutoStartup")]),t._v("：自动启动选项")]),t._v(" "),s("li",[s("code",[t._v("UpdateSource")]),t._v("：更新源（如Github）")]),t._v(" "),s("li",[s("code",[t._v("GetMinecraftTestVersion")]),t._v("：是否获取测试版服务器版本")]),t._v(" "),s("li",[s("code",[t._v("StorageSizeUpdateTime")]),t._v("：存储大小更新时间（秒）")]),t._v(" "),s("li",[s("code",[t._v("Port")]),t._v("：Web服务器端口号")])]),t._v(" "),s("h3",{attrs:{id:"_4-2-java-versions-json配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-java-versions-json配置文件"}},[t._v("#")]),t._v(" 4.2 java_versions.json配置文件")]),t._v(" "),s("p",[t._v("记录不同Java版本的安装路径，用于服务器启动时选择合适的Java版本。")]),t._v(" "),s("h2",{attrs:{id:"_5-文件结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-文件结构"}},[t._v("#")]),t._v(" 5. 文件结构")]),t._v(" "),s("h3",{attrs:{id:"_5-1-主要目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-主要目录结构"}},[t._v("#")]),t._v(" 5.1 主要目录结构")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("PCSMT-2/\n├── PCSMT2.py              # 主程序文件\n├── config.json            # 程序配置文件\n├── java_versions.json     # Java版本配置文件\n├── bin/                   # 核心功能模块目录\n│   ├── command/           # 命令实现模块\n│   ├── export/            # 导出和工具模块\n│   ├── api/               # Web API模块\n│   ├── find_files/        # 文件查找工具\n│   └── introduction/      # 介绍信息模块\n├── static/                # 静态资源文件\n│   ├── js/                # JavaScript文件\n│   └── PCSMT2.ico         # 程序图标\n└── servers/               # 服务器存储目录\n")])])]),s("h3",{attrs:{id:"_5-2-关键文件说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-关键文件说明"}},[t._v("#")]),t._v(" 5.2 关键文件说明")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("PCSMT2.py")]),t._v("：程序入口点，实现GUI和命令行界面")]),t._v(" "),s("li",[s("strong",[t._v("bin/command/Server.py")]),t._v("：服务器管理核心功能实现")]),t._v(" "),s("li",[s("strong",[t._v("bin/export/timer.py")]),t._v("：定时任务和监控功能实现")]),t._v(" "),s("li",[s("strong",[t._v("bin/export/Java.py")]),t._v("：Java版本管理功能实现")]),t._v(" "),s("li",[s("strong",[t._v("bin/api/main.py")]),t._v("：Web API入口点")])]),t._v(" "),s("h2",{attrs:{id:"_6-技术栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-技术栈"}},[t._v("#")]),t._v(" 6. 技术栈")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("编程语言")]),t._v("：Python")]),t._v(" "),s("li",[s("strong",[t._v("GUI框架")]),t._v("：Tkinter")]),t._v(" "),s("li",[s("strong",[t._v("Web框架")]),t._v("：Flask")]),t._v(" "),s("li",[s("strong",[t._v("服务器通信")]),t._v("：RCON协议")]),t._v(" "),s("li",[s("strong",[t._v("并发处理")]),t._v("：多线程")]),t._v(" "),s("li",[s("strong",[t._v("配置管理")]),t._v("：JSON文件")]),t._v(" "),s("li",[s("strong",[t._v("系统交互")]),t._v("：psutil、subprocess")]),t._v(" "),s("li",[s("strong",[t._v("版本管理")]),t._v("：packaging.version")])]),t._v(" "),s("h2",{attrs:{id:"_7-未来功能规划"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-未来功能规划"}},[t._v("#")]),t._v(" 7. 未来功能规划")]),t._v(" "),s("p",[t._v("根据README中的说明，项目计划在未来实现以下功能：")]),t._v(" "),s("ul",[s("li",[t._v("丰富命令和功能")]),t._v(" "),s("li",[t._v("支持更多类型的服务器")]),t._v(" "),s("li",[t._v("增强服务器管理功能")])]),t._v(" "),s("h2",{attrs:{id:"_8-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-总结"}},[t._v("#")]),t._v(" 8. 总结")]),t._v(" "),s("p",[t._v("PCSMT-2是一个功能全面的Minecraft服务器管理工具，通过结合GUI、命令行和Web界面，为用户提供了便捷的服务器管理体验。其核心优势在于自动Java版本管理、完善的服务器生命周期管理、实时监控和丰富的命令集。程序采用模块化设计，各功能模块相对独立，便于维护和扩展。")]),t._v(" "),s("p",[t._v("通过本文档，希望能够帮助开发者理解PCSMT-2的整体架构和功能实现细节，为后续的项目开发和维护提供参考。")])])}),[],!1,null,null,null);s.default=e.exports}}]);